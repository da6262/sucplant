<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ ë¸Œë¼ìš°ì €ë³„ ì €ì¥ì†Œ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold mb-6">ğŸŒ ë¸Œë¼ìš°ì €ë³„ ì €ì¥ì†Œ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
            <h2 class="font-semibold text-yellow-800 mb-2">âš ï¸ ì¤‘ìš”í•œ ì •ë³´</h2>
            <p class="text-yellow-700 text-sm">
                LocalStorageëŠ” <strong>ë¸Œë¼ìš°ì €ë³„ë¡œ ë…ë¦½ì </strong>ì…ë‹ˆë‹¤. 
                Chromeì—ì„œ ì €ì¥í•œ ë°ì´í„°ëŠ” Firefoxì—ì„œ ë³¼ ìˆ˜ ì—†ê³ , 
                Firefoxì—ì„œ ì €ì¥í•œ ë°ì´í„°ëŠ” Edgeì—ì„œ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- í˜„ì¬ ë¸Œë¼ìš°ì € ì •ë³´ -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="font-semibold mb-4">ğŸ–¥ï¸ í˜„ì¬ ë¸Œë¼ìš°ì € ì •ë³´</h2>
                <div id="browser-info" class="text-sm space-y-2"></div>
            </div>
            
            <!-- LocalStorage ìƒíƒœ -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="font-semibold mb-4">ğŸ’¾ LocalStorage ìƒíƒœ</h2>
                <div id="storage-status" class="text-sm space-y-2"></div>
                <button onclick="checkStorage()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
                    ğŸ”„ ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± -->
        <div class="mt-6 bg-white p-6 rounded-lg shadow">
            <h2 class="font-semibold mb-4">ğŸ§ª í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button onclick="createTestData()" class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded">
                    í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
                </button>
                <button onclick="clearTestData()" class="bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded">
                    í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‚­ì œ
                </button>
                <button onclick="exportData()" class="bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded">
                    ë°ì´í„° ë‚´ë³´ë‚´ê¸°
                </button>
            </div>
            <div id="test-result" class="mt-4 text-sm"></div>
        </div>
        
        <!-- ë¸Œë¼ìš°ì €ë³„ ë¹„êµ ê°€ì´ë“œ -->
        <div class="mt-6 bg-white p-6 rounded-lg shadow">
            <h2 class="font-semibold mb-4">ğŸ“‹ ë¸Œë¼ìš°ì €ë³„ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ</h2>
            <div class="text-sm space-y-3">
                <div class="border-l-4 border-blue-500 pl-4">
                    <strong>Chrome:</strong> ì´ í˜ì´ì§€ì—ì„œ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³ , Chrome ê°œë°œì ë„êµ¬(F12) â†’ Application â†’ Local Storageì—ì„œ í™•ì¸
                </div>
                <div class="border-l-4 border-orange-500 pl-4">
                    <strong>Firefox:</strong> Firefoxì—ì„œ ê°™ì€ í˜ì´ì§€ë¥¼ ì—´ê³ , Firefox ê°œë°œì ë„êµ¬(F12) â†’ Storage â†’ Local Storageì—ì„œ í™•ì¸
                </div>
                <div class="border-l-4 border-green-500 pl-4">
                    <strong>Edge:</strong> Edgeì—ì„œ ê°™ì€ í˜ì´ì§€ë¥¼ ì—´ê³ , Edge ê°œë°œì ë„êµ¬(F12) â†’ Application â†’ Local Storageì—ì„œ í™•ì¸
                </div>
                <div class="border-l-4 border-red-500 pl-4">
                    <strong>Safari:</strong> Safariì—ì„œ ê°™ì€ í˜ì´ì§€ë¥¼ ì—´ê³ , Safari ê°œë°œì ë„êµ¬ â†’ Storage â†’ Local Storageì—ì„œ í™•ì¸
                </div>
            </div>
        </div>
        
        <!-- ë°ì´í„° ë™ê¸°í™” ë°©ë²• -->
        <div class="mt-6 bg-white p-6 rounded-lg shadow">
            <h2 class="font-semibold mb-4">ğŸ”„ ë°ì´í„° ë™ê¸°í™” ë°©ë²•</h2>
            <div class="text-sm space-y-3">
                <div class="bg-blue-50 p-3 rounded">
                    <strong>1. ë°ì´í„° ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°:</strong> í˜„ì¬ ë¸Œë¼ìš°ì €ì—ì„œ ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê³ , ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œ ê°€ì ¸ì˜¤ê¸°
                </div>
                <div class="bg-green-50 p-3 rounded">
                    <strong>2. ì„œë²„ API ì‚¬ìš©:</strong> ëª¨ë“  ë¸Œë¼ìš°ì €ê°€ ê°™ì€ ì„œë²„ APIì— ì—°ê²°í•˜ì—¬ ë°ì´í„° ë™ê¸°í™”
                </div>
                <div class="bg-purple-50 p-3 rounded">
                    <strong>3. í´ë¼ìš°ë“œ ë™ê¸°í™”:</strong> Google Drive, Dropbox ë“±ì„ í†µí•œ ë°ì´í„° ë™ê¸°í™”
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë¸Œë¼ìš°ì € ì •ë³´ í‘œì‹œ
        function displayBrowserInfo() {
            const infoDiv = document.getElementById('browser-info');
            const userAgent = navigator.userAgent;
            let browserName = 'Unknown';
            let browserVersion = 'Unknown';
            
            if (userAgent.indexOf('Chrome') > -1 && userAgent.indexOf('Edg') === -1) {
                browserName = 'Chrome';
                browserVersion = userAgent.match(/Chrome\/(\d+)/)?.[1] || 'Unknown';
            } else if (userAgent.indexOf('Firefox') > -1) {
                browserName = 'Firefox';
                browserVersion = userAgent.match(/Firefox\/(\d+)/)?.[1] || 'Unknown';
            } else if (userAgent.indexOf('Edg') > -1) {
                browserName = 'Edge';
                browserVersion = userAgent.match(/Edg\/(\d+)/)?.[1] || 'Unknown';
            } else if (userAgent.indexOf('Safari') > -1 && userAgent.indexOf('Chrome') === -1) {
                browserName = 'Safari';
                browserVersion = userAgent.match(/Version\/(\d+)/)?.[1] || 'Unknown';
            }
            
            infoDiv.innerHTML = `
                <div><strong>ë¸Œë¼ìš°ì €:</strong> ${browserName} ${browserVersion}</div>
                <div><strong>User Agent:</strong> ${userAgent}</div>
                <div><strong>ì–¸ì–´:</strong> ${navigator.language}</div>
                <div><strong>í”Œë«í¼:</strong> ${navigator.platform}</div>
                <div><strong>ì¿ í‚¤ í™œì„±í™”:</strong> ${navigator.cookieEnabled ? 'Yes' : 'No'}</div>
                <div><strong>LocalStorage ì§€ì›:</strong> ${typeof(Storage) !== "undefined" ? 'Yes' : 'No'}</div>
            `;
        }
        
        // LocalStorage ìƒíƒœ í™•ì¸
        function checkStorage() {
            const statusDiv = document.getElementById('storage-status');
            const key = 'farm_management_customers';
            const data = localStorage.getItem(key);
            
            let output = `<div class="font-medium">í‚¤: ${key}</div>`;
            
            if (data) {
                try {
                    const customers = JSON.parse(data);
                    output += `
                        <div class="text-green-600">âœ… ë°ì´í„° ì¡´ì¬</div>
                        <div>ê³ ê° ìˆ˜: ${customers.length}ëª…</div>
                        <div>ë°ì´í„° í¬ê¸°: ${data.length} bytes</div>
                        <div>ë§ˆì§€ë§‰ ìˆ˜ì •: ${new Date().toLocaleString()}</div>
                    `;
                    
                    if (customers.length > 0) {
                        output += `<div class="mt-2"><strong>ìµœê·¼ ê³ ê°:</strong></div>`;
                        customers.slice(-3).forEach(customer => {
                            output += `<div class="text-xs text-gray-600">â€¢ ${customer.name} (${customer.phone})</div>`;
                        });
                    }
                } catch (error) {
                    output += `<div class="text-red-600">âŒ JSON íŒŒì‹± ì˜¤ë¥˜: ${error.message}</div>`;
                }
            } else {
                output += `<div class="text-red-600">âŒ ë°ì´í„° ì—†ìŒ</div>`;
            }
            
            // LocalStorage ì „ì²´ ìƒíƒœ
            output += `<div class="mt-4"><strong>ì „ì²´ LocalStorage:</strong></div>`;
            let totalKeys = 0;
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && key.startsWith('farm_management_')) {
                    totalKeys++;
                    output += `<div class="text-xs text-gray-600">â€¢ ${key}</div>`;
                }
            }
            if (totalKeys === 0) {
                output += `<div class="text-xs text-gray-500">farm_management_ í‚¤ê°€ ì—†ìŠµë‹ˆë‹¤</div>`;
            }
            
            statusDiv.innerHTML = output;
        }
        
        // í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
        function createTestData() {
            const resultDiv = document.getElementById('test-result');
            const browserName = navigator.userAgent.includes('Chrome') ? 'Chrome' : 
                              navigator.userAgent.includes('Firefox') ? 'Firefox' : 
                              navigator.userAgent.includes('Edg') ? 'Edge' : 
                              navigator.userAgent.includes('Safari') ? 'Safari' : 'Unknown';
            
            const testCustomers = [
                {
                    id: `test_${browserName.toLowerCase()}_1`,
                    name: `${browserName} í…ŒìŠ¤íŠ¸ ê³ ê° 1`,
                    phone: '010-1111-1111',
                    address: `${browserName} ë¸Œë¼ìš°ì €ì—ì„œ ìƒì„±`,
                    grade: 'GENERAL',
                    created_at: new Date().toISOString(),
                    browser: browserName
                },
                {
                    id: `test_${browserName.toLowerCase()}_2`,
                    name: `${browserName} í…ŒìŠ¤íŠ¸ ê³ ê° 2`,
                    phone: '010-2222-2222',
                    address: `${browserName} ë¸Œë¼ìš°ì €ì—ì„œ ìƒì„±`,
                    grade: 'VIP',
                    created_at: new Date().toISOString(),
                    browser: browserName
                }
            ];
            
            try {
                const key = 'farm_management_customers';
                const existingData = localStorage.getItem(key);
                const customers = existingData ? JSON.parse(existingData) : [];
                
                // ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì œê±°
                const filteredCustomers = customers.filter(c => !c.id.startsWith('test_'));
                
                // ìƒˆ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¶”ê°€
                filteredCustomers.push(...testCustomers);
                
                localStorage.setItem(key, JSON.stringify(filteredCustomers));
                
                resultDiv.innerHTML = `
                    <div class="text-green-600">âœ… ${browserName} ë¸Œë¼ìš°ì €ìš© í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì™„ë£Œ!</div>
                    <div>ìƒì„±ëœ ê³ ê°: ${testCustomers.length}ëª…</div>
                    <div>ì´ ê³ ê° ìˆ˜: ${filteredCustomers.length}ëª…</div>
                    <div class="mt-2 text-xs text-gray-600">
                        ì´ì œ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œ ê°™ì€ í˜ì´ì§€ë¥¼ ì—´ì–´ë³´ì„¸ìš”. 
                        ë°ì´í„°ê°€ ë‹¤ë¥¼ ê²ƒì…ë‹ˆë‹¤!
                    </div>
                `;
                
                checkStorage();
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="text-red-600">âŒ ë°ì´í„° ìƒì„± ì‹¤íŒ¨: ${error.message}</div>`;
            }
        }
        
        // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‚­ì œ
        function clearTestData() {
            if (confirm('í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                try {
                    const key = 'farm_management_customers';
                    const existingData = localStorage.getItem(key);
                    const customers = existingData ? JSON.parse(existingData) : [];
                    
                    // í…ŒìŠ¤íŠ¸ ë°ì´í„°ë§Œ ì œê±°
                    const filteredCustomers = customers.filter(c => !c.id.startsWith('test_'));
                    
                    localStorage.setItem(key, JSON.stringify(filteredCustomers));
                    
                    document.getElementById('test-result').innerHTML = 
                        '<div class="text-orange-600">ğŸ—‘ï¸ í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.</div>';
                    
                    checkStorage();
                } catch (error) {
                    document.getElementById('test-result').innerHTML = 
                        `<div class="text-red-600">âŒ ì‚­ì œ ì‹¤íŒ¨: ${error.message}</div>`;
                }
            }
        }
        
        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportData() {
            try {
                const key = 'farm_management_customers';
                const data = localStorage.getItem(key);
                
                if (data) {
                    const customers = JSON.parse(data);
                    const exportData = {
                        exportDate: new Date().toISOString(),
                        browser: navigator.userAgent,
                        customers: customers
                    };
                    
                    const blob = new Blob([JSON.stringify(exportData, null, 2)], {type: 'application/json'});
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `customers_${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    document.getElementById('test-result').innerHTML = 
                        '<div class="text-green-600">ğŸ“ ë°ì´í„°ê°€ JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤.</div>';
                } else {
                    document.getElementById('test-result').innerHTML = 
                        '<div class="text-red-600">âŒ ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                }
            } catch (error) {
                document.getElementById('test-result').innerHTML = 
                    `<div class="text-red-600">âŒ ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨: ${error.message}</div>`;
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            displayBrowserInfo();
            checkStorage();
        };
    </script>
</body>
</html>

