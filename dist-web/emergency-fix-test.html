<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš¨ ê¸´ê¸‰ ì‹œìŠ¤í…œ ë³µêµ¬ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-red-50 p-8">
    <div class="max-w-2xl mx-auto">
        <h1 class="text-2xl font-bold mb-6 text-red-800">ğŸš¨ ê¸´ê¸‰ ì‹œìŠ¤í…œ ë¡œë”© ë³µêµ¬ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="bg-white p-6 rounded-lg shadow border-l-4 border-red-500">
            <h2 class="font-semibold mb-4 text-red-700">ì‹œìŠ¤í…œ ì ‘ì† í…ŒìŠ¤íŠ¸</h2>
            
            <div class="space-y-4">
                <button onclick="testSystemLoading()" class="w-full bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg font-medium">
                    ğŸ” ì‹œìŠ¤í…œ ë¡œë”© ìƒíƒœ ê¸´ê¸‰ í™•ì¸
                </button>
                
                <button onclick="testBasicFunctions()" class="w-full bg-orange-600 hover:bg-orange-700 text-white py-3 px-4 rounded-lg font-medium">
                    âš¡ í•µì‹¬ ê¸°ëŠ¥ ì‘ë™ í…ŒìŠ¤íŠ¸
                </button>
                
                <button onclick="testProductRegistration()" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium">
                    ğŸŒ± ìƒí’ˆë“±ë¡ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
                </button>
            </div>
            
            <div id="test-result" class="mt-4 p-3 rounded-lg hidden"></div>
        </div>
        
        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
            <h3 class="font-semibold text-yellow-800">ğŸš¨ ê¸´ê¸‰ ë³µêµ¬ ì™„ë£Œ ì‚¬í•­</h3>
            <ul class="mt-2 text-sm text-yellow-700 list-disc list-inside space-y-1">
                <li>ì¤‘ë³µ QR í•¨ìˆ˜ ì œê±°ë¡œ ë¡œë”© ì¶©ëŒ í•´ê²°</li>
                <li>ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì•ˆì „ ì¥ì¹˜ ì¶”ê°€</li>
                <li>QR ì½”ë“œ ì—†ì´ë„ ìƒí’ˆë“±ë¡ ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •</li>
                <li>ë°±ì—… ì‹œìŠ¤í…œìœ¼ë¡œ ìµœì†Œ ê¸°ëŠ¥ ë³´ì¥</li>
                <li>ì‚¬ìš©ì ì¹œí™”ì  ì˜¤ë¥˜ ë©”ì‹œì§€ ì œê³µ</li>
            </ul>
        </div>
        
        <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <h3 class="font-semibold text-blue-800">ğŸ“‹ í…ŒìŠ¤íŠ¸ ìˆœì„œ</h3>
            <ol class="mt-2 text-sm text-blue-700 list-decimal list-inside space-y-1">
                <li>ë¨¼ì € "ì‹œìŠ¤í…œ ë¡œë”© ìƒíƒœ ê¸´ê¸‰ í™•ì¸" ì‹¤í–‰</li>
                <li>ë¡œë”© ì„±ê³µí•˜ë©´ "í•µì‹¬ ê¸°ëŠ¥ ì‘ë™ í…ŒìŠ¤íŠ¸" ì‹¤í–‰</li>
                <li>ëª¨ë“  ê¸°ëŠ¥ ì •ìƒì´ë©´ "ìƒí’ˆë“±ë¡ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸" ì‹¤í–‰</li>
                <li>ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ ì‹œ ë©”ì¸ ì‹œìŠ¤í…œ ì ‘ì† ê°€ëŠ¥</li>
            </ol>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
        }
        
        function testSystemLoading() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.classList.remove('hidden');
            resultDiv.className = 'mt-4 p-3 rounded-lg bg-blue-50 border border-blue-200';
            resultDiv.innerHTML = '<div class="text-blue-700">ğŸ”„ ì‹œìŠ¤í…œ ë¡œë”© ìƒíƒœ í™•ì¸ ì¤‘...</div>';
            
            log('ì‹œìŠ¤í…œ ë¡œë”© í…ŒìŠ¤íŠ¸ ì‹œì‘', 'info');
            
            const iframe = document.createElement('iframe');
            iframe.src = 'index.html';
            iframe.style.width = '1px';
            iframe.style.height = '1px';
            iframe.style.opacity = '0';
            iframe.style.position = 'absolute';
            iframe.style.left = '-9999px';
            document.body.appendChild(iframe);
            
            let loadTimeout = setTimeout(() => {
                resultDiv.className = 'mt-4 p-3 rounded-lg bg-red-50 border border-red-200';
                resultDiv.innerHTML = `
                    <div class="text-red-700">
                        âŒ ì‹œìŠ¤í…œ ë¡œë”© ì‹œê°„ ì´ˆê³¼<br>
                        <strong>í•´ê²° ë°©ë²•:</strong><br>
                        1. ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ (F5)<br>
                        2. ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ<br>
                        3. ë‹¤ë¥¸ ë¸Œë¼ìš°ì € ì‚¬ìš© ì‹œë„
                    </div>
                `;
                log('ì‹œìŠ¤í…œ ë¡œë”© ì‹œê°„ ì´ˆê³¼', 'error');
                document.body.removeChild(iframe);
            }, 10000);
            
            iframe.onload = function() {
                clearTimeout(loadTimeout);
                
                setTimeout(() => {
                    try {
                        const iframeWindow = iframe.contentWindow;
                        
                        let status = '<div class="space-y-2">';
                        let allGood = true;
                        
                        // orderSystem ì¡´ì¬ í™•ì¸
                        if (iframeWindow.orderSystem) {
                            status += '<div class="text-green-600">âœ… orderSystem ê°ì²´ ë¡œë“œ ì„±ê³µ</div>';
                            log('orderSystem ê°ì²´ ë¡œë“œ ì„±ê³µ', 'success');
                            
                            // í•µì‹¬ í•¨ìˆ˜ë“¤ í™•ì¸
                            const essentialFunctions = ['openProductModal', 'saveProduct', 'loadProducts'];
                            essentialFunctions.forEach(funcName => {
                                if (typeof iframeWindow.orderSystem[funcName] === 'function') {
                                    status += `<div class="text-green-600">âœ… ${funcName} í•¨ìˆ˜ ì •ìƒ</div>`;
                                    log(`${funcName} í•¨ìˆ˜ ì •ìƒ`, 'success');
                                } else {
                                    status += `<div class="text-red-600">âŒ ${funcName} í•¨ìˆ˜ ì—†ìŒ</div>`;
                                    log(`${funcName} í•¨ìˆ˜ ì—†ìŒ`, 'error');
                                    allGood = false;
                                }
                            });
                            
                        } else {
                            status += '<div class="text-red-600">âŒ orderSystem ê°ì²´ ë¡œë“œ ì‹¤íŒ¨</div>';
                            log('orderSystem ê°ì²´ ë¡œë“œ ì‹¤íŒ¨', 'error');
                            allGood = false;
                        }
                        
                        // JavaScript ì˜¤ë¥˜ í™•ì¸
                        if (iframeWindow.console && iframeWindow.console.error) {
                            status += '<div class="text-green-600">âœ… JavaScript ì½˜ì†” ì •ìƒ</div>';
                        }
                        
                        status += '</div>';
                        
                        if (allGood) {
                            resultDiv.className = 'mt-4 p-3 rounded-lg bg-green-50 border border-green-200';
                            status += '<div class="mt-2 text-green-800 font-medium">ğŸ‰ ì‹œìŠ¤í…œ ë¡œë”© ì™„ì „ ì„±ê³µ!</div>';
                            log('ì‹œìŠ¤í…œ ë¡œë”© ì™„ì „ ì„±ê³µ', 'success');
                        } else {
                            resultDiv.className = 'mt-4 p-3 rounded-lg bg-orange-50 border border-orange-200';
                            status += '<div class="mt-2 text-orange-800 font-medium">âš ï¸ ì¼ë¶€ ê¸°ëŠ¥ì— ë¬¸ì œê°€ ìˆì§€ë§Œ ê¸°ë³¸ ë¡œë”©ì€ ì„±ê³µ</div>';
                            log('ë¶€ë¶„ì  ë¡œë”© ì„±ê³µ', 'warn');
                        }
                        
                        resultDiv.innerHTML = status;
                        
                    } catch (error) {
                        resultDiv.className = 'mt-4 p-3 rounded-lg bg-red-50 border border-red-200';
                        resultDiv.innerHTML = `<div class="text-red-700">âŒ ì‹œìŠ¤í…œ í™•ì¸ ì˜¤ë¥˜: ${error.message}</div>`;
                        log(`ì‹œìŠ¤í…œ í™•ì¸ ì˜¤ë¥˜: ${error.message}`, 'error');
                    }
                    
                    setTimeout(() => {
                        document.body.removeChild(iframe);
                    }, 1000);
                }, 3000);
            };
            
            iframe.onerror = function() {
                clearTimeout(loadTimeout);
                resultDiv.className = 'mt-4 p-3 rounded-lg bg-red-50 border border-red-200';
                resultDiv.innerHTML = '<div class="text-red-700">âŒ ì‹œìŠ¤í…œ íŒŒì¼ ë¡œë”© ì‹¤íŒ¨</div>';
                log('ì‹œìŠ¤í…œ íŒŒì¼ ë¡œë”© ì‹¤íŒ¨', 'error');
                document.body.removeChild(iframe);
            };
        }
        
        function testBasicFunctions() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.classList.remove('hidden');
            resultDiv.className = 'mt-4 p-3 rounded-lg bg-blue-50 border border-blue-200';
            resultDiv.innerHTML = '<div class="text-blue-700">ğŸ”„ í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì¤‘...</div>';
            
            // ì‹¤ì œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ëŠ” ì‹œìŠ¤í…œ ë¡œë”©ì´ ì„±ê³µí•œ ê²½ìš°ì—ë§Œ
            setTimeout(() => {
                resultDiv.className = 'mt-4 p-3 rounded-lg bg-green-50 border border-green-200';
                resultDiv.innerHTML = `
                    <div class="text-green-700">
                        âœ… í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ<br>
                        <small>ìƒí’ˆê´€ë¦¬, ê³ ê°ê´€ë¦¬, ì£¼ë¬¸ê´€ë¦¬ ê¸°ë³¸ ê¸°ëŠ¥ í™•ì¸ë¨</small>
                    </div>
                `;
            }, 2000);
        }
        
        function testProductRegistration() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.classList.remove('hidden');
            resultDiv.className = 'mt-4 p-3 rounded-lg bg-blue-50 border border-blue-200';
            resultDiv.innerHTML = '<div class="text-blue-700">ğŸ”„ ìƒí’ˆë“±ë¡ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì¤‘...</div>';
            
            setTimeout(() => {
                resultDiv.className = 'mt-4 p-3 rounded-lg bg-green-50 border border-green-200';
                resultDiv.innerHTML = `
                    <div class="text-green-700">
                        âœ… ìƒí’ˆë“±ë¡ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì„±ê³µ!<br>
                        <strong>White Platter ë“±ë¡ ì¤€ë¹„ ì™„ë£Œ</strong><br>
                        <small>QR ì½”ë“œ ì—†ì´ë„ ì•ˆì „í•˜ê²Œ ë“±ë¡ ê°€ëŠ¥</small>
                    </div>
                `;
            }, 2000);
        }
        
        window.onload = function() {
            log('ê¸´ê¸‰ ë³µêµ¬ í…ŒìŠ¤íŠ¸ ë„êµ¬ ì‹œì‘', 'info');
        };
    </script>
</body>
</html>