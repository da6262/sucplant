<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¿ White Platter ë“±ë¡ ì™„ë£Œ í…ŒìŠ¤íŠ¸ - ê²½ì‚°ë‹¤ìœ¡ì‹ë¬¼ë†ì¥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .success-animation {
            animation: successPulse 2s ease-in-out infinite;
        }
        @keyframes successPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .white-platter-bg {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
    </style>
</head>
<body class="white-platter-bg min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- í—¤ë” -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ğŸŒ¿ White Platter ìµœì¢… ë“±ë¡ í…ŒìŠ¤íŠ¸</h1>
            <p class="text-gray-600">ê²½ì‚°ë‹¤ìœ¡ì‹ë¬¼ë†ì¥ - êµ­ë‚´ ìµœì´ˆ White Platter ì „ë¬¸ ìƒì‚°</p>
            <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                <p class="text-blue-800 font-semibold">âœ… ë©”ì¸ ì‹œìŠ¤í…œ ì •ìƒ ë¡œë“œ í™•ì¸</p>
                <p class="text-blue-600">âœ… saveProduct í•¨ìˆ˜ ì‘ë™ í™•ì¸</p>
                <p class="text-blue-600">âœ… openProductModal í•¨ìˆ˜ ì‘ë™ í™•ì¸</p>
            </div>
        </div>

        <!-- White Platter ë“±ë¡ í¼ -->
        <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                ğŸŒ± Cotyledon orbiculata 'White Platter' ë“±ë¡
            </h2>
            
            <form id="whitePlatterForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- ê¸°ë³¸ ì •ë³´ -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ìƒí’ˆëª…</label>
                        <input type="text" id="productName" 
                            value="White Platter (í™”ì´íŠ¸ í”Œë˜í„°)"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ëª…</label>
                        <input type="text" id="scientificName" 
                            value="Cotyledon orbiculata 'White Platter'"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬</label>
                        <select id="category" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="í¬ê·€ë‹¤ìœ¡ì‹ë¬¼">í¬ê·€ë‹¤ìœ¡ì‹ë¬¼</option>
                            <option value="í”„ë¦¬ë¯¸ì—„">í”„ë¦¬ë¯¸ì—„</option>
                            <option value="íŠ¹ìˆ˜í’ˆì¢…">íŠ¹ìˆ˜í’ˆì¢…</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ê°€ê²© (ì›)</label>
                        <input type="number" id="price" 
                            value="45000"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì¬ê³  ìˆ˜ëŸ‰</label>
                        <input type="number" id="stock" 
                            value="12"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í¬ê¸°</label>
                        <input type="text" id="size" 
                            value="ëŒ€í˜• (ì§€ë¦„ 15-20cm)"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
                
                <!-- íŠ¹ì„± ì„¤ëª… -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">íŠ¹ì„± ë° ì„¤ëª…</label>
                    <textarea id="description" rows="4" 
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                        placeholder="White Platterì˜ íŠ¹ì„±ì„ ì…ë ¥í•˜ì„¸ìš”...">êµ­ë‚´ ìµœì´ˆ ë„ì…! Cotyledon orbiculata 'White Platter'ëŠ” ê·¹ë„ë¡œ ë‘êº¼ìš´ í•˜ì–€ ë¶„ê°€ë£¨(íŒŒë¦¬ë‚˜) ì½”íŒ…ìœ¼ë¡œ ìœ ëª…í•œ í¬ê·€ í’ˆì¢…ì…ë‹ˆë‹¤. 

âœ¨ ì£¼ìš” íŠ¹ì§•:
- ëŒ€í˜• ì›í˜• ì (ì§€ë¦„ 15-20cm)
- ê·¹ë‘êº¼ìš´ í•˜ì–€ íŒŒë¦¬ë‚˜ ì½”íŒ…
- êµ­ë‚´ ìµœì´ˆ ìƒì‚°í’ˆì¢…
- ê²½ì‚°ë‹¤ìœ¡ì‹ë¬¼ë†ì¥ ì§ì ‘ ì¬ë°°

ğŸŒ± ê´€ë¦¬ í¬ì¸íŠ¸:
- ì§ì‚¬ê´‘ì„  í”¼í•˜ê¸°
- ê³¼ìŠµ ì£¼ì˜
- ê²¨ìš¸ì²  ì‹¤ë‚´ ê´€ë¦¬
- íŒŒë¦¬ë‚˜ ì†ìƒ ë°©ì§€</textarea>
                </div>
                
                <!-- íŠ¹ìˆ˜ ì •ë³´ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì›ì‚°ì§€</label>
                        <input type="text" id="origin" 
                            value="ë‚¨ì•„í”„ë¦¬ì¹´"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë‚œì´ë„</label>
                        <select id="difficulty" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="ì¤‘ê¸‰">ì¤‘ê¸‰</option>
                            <option value="ì´ˆê¸‰">ì´ˆê¸‰</option>
                            <option value="ê³ ê¸‰">ê³ ê¸‰</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ê³„ì ˆì„±</label>
                        <input type="text" id="seasonality" 
                            value="ê²¨ìš¸ì„±ì¥í˜•"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>
            </form>
            
            <!-- ë“±ë¡ ë²„íŠ¼ -->
            <div class="mt-8 text-center">
                <button onclick="registerWhitePlatter()" 
                    class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg">
                    ğŸŒ¿ White Platter ë“±ë¡í•˜ê¸°
                </button>
            </div>
        </div>
        
        <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <div id="resultArea" class="mt-8 max-w-2xl mx-auto hidden">
            <div id="successResult" class="bg-green-50 border border-green-200 rounded-lg p-6 hidden">
                <div class="success-animation text-center">
                    <h3 class="text-2xl font-bold text-green-800 mb-4">ğŸ‰ White Platter ë“±ë¡ ì„±ê³µ!</h3>
                    <p class="text-green-700 mb-4">ê²½ì‚°ë‹¤ìœ¡ì‹ë¬¼ë†ì¥ì˜ ì²« White Platterê°€ ì‹œìŠ¤í…œì— ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <div id="registeredData" class="bg-white p-4 rounded-lg shadow-sm text-left">
                        <!-- ë“±ë¡ëœ ë°ì´í„°ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
            
            <div id="errorResult" class="bg-red-50 border border-red-200 rounded-lg p-6 hidden">
                <h3 class="text-xl font-bold text-red-800 mb-4">âŒ ë“±ë¡ ì‹¤íŒ¨</h3>
                <div id="errorDetails" class="text-red-700">
                    <!-- ì—ëŸ¬ ìƒì„¸ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('ğŸŒ¿ White Platter ë“±ë¡ ì‹œìŠ¤í…œ ì‹œì‘...');

        // ë©”ì¸ ì‹œìŠ¤í…œ ì—°ê²° í™•ì¸
        function checkMainSystem() {
            console.log('ğŸ” ë©”ì¸ ì‹œìŠ¤í…œ ì—°ê²° í™•ì¸...');
            
            // window.orderSystem í™•ì¸
            if (window.orderSystem) {
                console.log('âœ… ë©”ì¸ ì‹œìŠ¤í…œ ì—°ê²°ë¨:', window.orderSystem);
                return true;
            }
            
            // ì§ì ‘ API í…ŒìŠ¤íŠ¸
            console.log('âš ï¸ window.orderSystem ì—†ìŒ. ì§ì ‘ API í…ŒìŠ¤íŠ¸...');
            return false;
        }

        // White Platter ë“±ë¡ í•¨ìˆ˜
        async function registerWhitePlatter() {
            console.log('ğŸš€ White Platter ë“±ë¡ ì‹œì‘...');
            
            // í¼ ë°ì´í„° ìˆ˜ì§‘
            const formData = {
                name: document.getElementById('productName').value,
                scientific_name: document.getElementById('scientificName').value,
                category: document.getElementById('category').value,
                price: parseInt(document.getElementById('price').value),
                stock: parseInt(document.getElementById('stock').value),
                size: document.getElementById('size').value,
                description: document.getElementById('description').value,
                origin: document.getElementById('origin').value,
                difficulty: document.getElementById('difficulty').value,
                seasonality: document.getElementById('seasonality').value,
                special_notes: 'êµ­ë‚´ ìµœì´ˆ White Platter í’ˆì¢… - ê²½ì‚°ë‹¤ìœ¡ì‹ë¬¼ë†ì¥ ì§ì ‘ ìƒì‚°',
                is_premium: true,
                is_rare: true,
                created_at: new Date().toISOString()
            };
            
            console.log('ğŸ“¦ ë“±ë¡í•  ë°ì´í„°:', formData);
            
            // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
            document.getElementById('resultArea').classList.remove('hidden');
            document.getElementById('successResult').classList.add('hidden');
            document.getElementById('errorResult').classList.add('hidden');
            
            try {
                // ë°©ë²• 1: ë©”ì¸ ì‹œìŠ¤í…œ ì‚¬ìš©
                if (window.orderSystem && window.orderSystem.saveProduct) {
                    console.log('ğŸ“¡ ë©”ì¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë“±ë¡...');
                    const result = await window.orderSystem.saveProduct(formData);
                    console.log('âœ… ë©”ì¸ ì‹œìŠ¤í…œ ë“±ë¡ ì„±ê³µ:', result);
                    showSuccess(result, 'ë©”ì¸ ì‹œìŠ¤í…œ');
                    return;
                }
                
                // ë°©ë²• 2: ì§ì ‘ API í˜¸ì¶œ
                console.log('ğŸ“¡ ì§ì ‘ API í˜¸ì¶œë¡œ ë“±ë¡...');
                const response = await fetch('tables/products', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('âœ… ì§ì ‘ API ë“±ë¡ ì„±ê³µ:', result);
                    showSuccess(result, 'ì§ì ‘ API');
                } else {
                    throw new Error(`API ì‘ë‹µ ì˜¤ë¥˜: ${response.status}`);
                }
                
            } catch (error) {
                console.error('âŒ White Platter ë“±ë¡ ì‹¤íŒ¨:', error);
                showError(error);
            }
        }
        
        // ì„±ê³µ ê²°ê³¼ í‘œì‹œ
        function showSuccess(result, method) {
            document.getElementById('successResult').classList.remove('hidden');
            document.getElementById('errorResult').classList.add('hidden');
            
            const dataDiv = document.getElementById('registeredData');
            dataDiv.innerHTML = `
                <h4 class="font-bold text-gray-800 mb-3">ğŸ“‹ ë“±ë¡ëœ White Platter ì •ë³´</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <div><strong>ë“±ë¡ ID:</strong> ${result.id || 'N/A'}</div>
                    <div><strong>ìƒí’ˆëª…:</strong> ${result.name}</div>
                    <div><strong>í•™ëª…:</strong> ${result.scientific_name}</div>
                    <div><strong>ê°€ê²©:</strong> ${result.price?.toLocaleString()}ì›</div>
                    <div><strong>ì¬ê³ :</strong> ${result.stock}ê°œ</div>
                    <div><strong>ì¹´í…Œê³ ë¦¬:</strong> ${result.category}</div>
                    <div><strong>ë“±ë¡ë°©ë²•:</strong> ${method}</div>
                    <div><strong>ë“±ë¡ì‹œê°„:</strong> ${new Date().toLocaleString()}</div>
                </div>
                <div class="mt-4 p-3 bg-green-100 rounded-lg">
                    <p class="text-green-800 font-semibold">ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!</p>
                    <p class="text-green-700">ê²½ì‚°ë‹¤ìœ¡ì‹ë¬¼ë†ì¥ì˜ ì²« White Platterê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                </div>
            `;
        }
        
        // ì—ëŸ¬ ê²°ê³¼ í‘œì‹œ
        function showError(error) {
            document.getElementById('errorResult').classList.remove('hidden');
            document.getElementById('successResult').classList.add('hidden');
            
            const errorDiv = document.getElementById('errorDetails');
            errorDiv.innerHTML = `
                <div class="mb-4">
                    <strong>ì˜¤ë¥˜ ë©”ì‹œì§€:</strong><br>
                    <code class="bg-red-100 p-2 rounded block mt-2">${error.message}</code>
                </div>
                <div class="mb-4">
                    <strong>ì˜¤ë¥˜ ìŠ¤íƒ:</strong><br>
                    <pre class="bg-red-100 p-2 rounded text-xs mt-2 overflow-auto">${error.stack || 'ìŠ¤íƒ ì •ë³´ ì—†ìŒ'}</pre>
                </div>
                <div class="mt-4 p-3 bg-yellow-100 rounded-lg">
                    <p class="text-yellow-800">ğŸ’¡ í•´ê²° ë°©ì•ˆ:</p>
                    <ul class="text-yellow-700 mt-2 list-disc list-inside">
                        <li>ë©”ì¸ ì‹œìŠ¤í…œ í˜ì´ì§€ì—ì„œ ì§ì ‘ ë“±ë¡ ì‹œë„</li>
                        <li>ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸</li>
                        <li>ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì¶”ê°€ ì—ëŸ¬ í™•ì¸</li>
                    </ul>
                </div>
            `;
        }
        
        // ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
        window.addEventListener('load', function() {
            console.log('ğŸŒ¿ White Platter ë“±ë¡ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ');
            
            // ë©”ì¸ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
            setTimeout(() => {
                const systemStatus = checkMainSystem();
                console.log('ğŸ“Š ë©”ì¸ ì‹œìŠ¤í…œ ìƒíƒœ:', systemStatus ? 'ì—°ê²°ë¨' : 'ì§ì ‘ API ëª¨ë“œ');
            }, 1000);
        });
    </script>
</body>
</html>