<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>경산다육식물농장 - 관리시스템 v1.0</title>
    
    <!-- Tailwind CSS 경고 무시 스크립트 (Tailwind 로드 전에 실행) -->
    <script>
        // 즉시 경고 차단 설정
        (function() {
            const originalWarn = console.warn;
            const originalError = console.error;
            
            console.warn = function(message) {
                if (typeof message === 'string' && 
                    (message.includes('cdn.tailwindcss.com should not be used in production') ||
                     message.includes('should not be used in production'))) {
                    return; // 이 경고는 무시
                }
                originalWarn.apply(console, arguments);
            };
            
            console.error = function(message) {
                if (typeof message === 'string' && 
                    (message.includes('cdn.tailwindcss.com should not be used in production') ||
                     message.includes('should not be used in production'))) {
                    return; // 이 에러도 무시
                }
                originalError.apply(console, arguments);
            };
        })();
    </script>
    <script src="js/tailwind-warning-suppress.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- SheetJS for Excel Export -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    
    <!-- QRCode.js for QR Code Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        /* 데스크톱 프로그램용 스타일 */
        .desktop-app {
            user-select: none;
        }
        
        .desktop-titlebar {
            -webkit-app-region: drag;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .desktop-content {
            -webkit-app-region: no-drag;
        }
        
        /* 스크롤바 스타일링 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* 프로그램 전용 애니메이션 */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 오프라인 표시 */
        .offline-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #10b981;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            z-index: 1000;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen desktop-app">
    <!-- 오프라인 상태 표시 -->
    <div class="offline-badge">
        <i class="fas fa-shield-alt"></i> 오프라인 모드
    </div>

    <!-- Desktop Titlebar -->
    <div class="desktop-titlebar h-8 flex items-center justify-between px-4 text-white text-sm">
        <div class="flex items-center space-x-2">
            <i class="fas fa-seedling"></i>
            <span>경산다육식물농장 관리시스템 v1.0</span>
        </div>
        <div class="flex items-center space-x-2 text-xs">
            <span id="current-time"></span>
            <i class="fas fa-database text-green-300" title="로컬 데이터베이스 연결됨"></i>
        </div>
    </div>

    <!-- Header -->
    <header class="desktop-content bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                        <i class="fas fa-seedling text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">경산다육식물농장</h1>
                        <p class="text-green-100 text-sm">White Platter 전문 관리시스템 🌱</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- 빠른 액션 버튼들 -->
                    <button onclick="quickBackup()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-2 rounded-lg transition-all duration-200" title="빠른 백업 (Ctrl+B)">
                        <i class="fas fa-download"></i>
                    </button>
                    <button onclick="quickImport()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-2 rounded-lg transition-all duration-200" title="데이터 가져오기 (Ctrl+I)">
                        <i class="fas fa-upload"></i>
                    </button>
                    <button onclick="showSystemInfo()" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-2 rounded-lg transition-all duration-200" title="시스템 정보">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    
                    <!-- 상태 표시 -->
                    <div class="text-right">
                        <div class="text-sm">부대장님</div>
                        <div class="text-xs text-green-200" id="status-text">시스템 준비 완료</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="desktop-content bg-white border-b border-gray-200 sticky top-8 z-40">
        <div class="container mx-auto px-6">
            <div class="flex space-x-8">
                <button id="orders-tab" onclick="orderSystem.switchTab('orders')" 
                        class="flex items-center space-x-2 py-4 border-b-2 border-green-500 text-green-600 font-medium tab-active">
                    <i class="fas fa-shopping-cart"></i>
                    <span>주문관리</span>
                    <span id="orders-count" class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs">0</span>
                </button>
                
                <button id="customers-tab" onclick="orderSystem.switchTab('farm_customers')" 
                        class="flex items-center space-x-2 py-4 border-b-2 border-transparent text-gray-600 hover:text-green-600 transition-colors">
                    <i class="fas fa-users"></i>
                    <span>고객관리</span>
                    <span id="customers-count" class="bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs">0</span>
                </button>
                
                <button id="products-tab" onclick="orderSystem.switchTab('products')" 
                        class="flex items-center space-x-2 py-4 border-b-2 border-transparent text-gray-600 hover:text-green-600 transition-colors">
                    <i class="fas fa-leaf"></i>
                    <span>상품관리</span>
                    <span id="products-count" class="bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs">0</span>
                </button>
                
                <button id="waitlist-tab" onclick="orderSystem.switchTab('waitlist')" 
                        class="flex items-center space-x-2 py-4 border-b-2 border-transparent text-gray-600 hover:text-green-600 transition-colors">
                    <i class="fas fa-clock"></i>
                    <span>대기자관리</span>
                    <span id="waitlist-count" class="bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs">0</span>
                </button>
                
                <button id="shipping-tab" onclick="orderSystem.switchTab('shipping')" 
                        class="flex items-center space-x-2 py-4 border-b-2 border-transparent text-gray-600 hover:text-green-600 transition-colors">
                    <i class="fas fa-truck"></i>
                    <span>배송관리</span>
                    <span id="shipping-count" class="bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- 상태 표시줄 -->
    <div class="desktop-content bg-green-50 border-b border-green-100 px-6 py-2">
        <div class="container mx-auto flex items-center justify-between text-sm">
            <div class="flex items-center space-x-6">
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-green-700">시스템 정상 작동 중</span>
                </div>
                <div class="text-gray-600">
                    <i class="fas fa-database mr-1"></i>
                    <span id="data-status">로컬 데이터베이스 연결됨</span>
                </div>
            </div>
            <div class="flex items-center space-x-4 text-gray-600">
                <span>마지막 저장: <span id="last-saved">방금 전</span></span>
                <span>|</span>
                <span>자동 저장: 활성화</span>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <main id="main-content" class="desktop-content container mx-auto px-6 py-6 fade-in">
        <!-- 여기에 기존 컨텐츠가 들어갑니다 -->
        <!-- 주문관리 섹션 -->
        <!-- 고객관리 섹션 -->
        <!-- 상품관리 섹션 -->
        <!-- 대기자관리 섹션 -->
        <!-- 배송관리 섹션 -->
    </main>

    <!-- Footer -->
    <footer class="desktop-content bg-white border-t border-gray-200 py-4 mt-auto">
        <div class="container mx-auto px-6">
            <div class="flex items-center justify-between text-sm text-gray-600">
                <div class="flex items-center space-x-4">
                    <span>© 2025 경산다육식물농장</span>
                    <span>|</span>
                    <span>White Platter 전문 생산 농장</span>
                </div>
                <div class="flex items-center space-x-4">
                    <span>버전 1.0.0</span>
                    <span>|</span>
                    <span>오프라인 모드</span>
                    <span>|</span>
                    <span class="text-green-600">
                        <i class="fas fa-shield-check mr-1"></i>
                        보안 연결
                    </span>
                </div>
            </div>
        </div>
    </footer>

    <!-- 기존 모달들과 JavaScript 포함 -->
    <script src="js/app.js"></script>
    <script src="js/desktop-integration.js"></script>

    <script>
        // 시간 업데이트
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString('ko-KR');
        }
        
        // 1초마다 시간 업데이트
        setInterval(updateTime, 1000);
        updateTime();

        // 자동 저장 시간 업데이트
        function updateLastSaved() {
            document.getElementById('last-saved').textContent = new Date().toLocaleTimeString('ko-KR');
        }

        // 데이터 저장 시마다 호출
        setInterval(updateLastSaved, 30000); // 30초마다 업데이트

        // 빠른 액션 함수들
        async function quickBackup() {
            if (typeof require !== 'undefined') {
                const { ipcRenderer } = require('electron');
                await ipcRenderer.invoke('export-data');
            }
        }

        async function quickImport() {
            if (typeof require !== 'undefined') {
                const { ipcRenderer } = require('electron');
                await ipcRenderer.invoke('import-data');
            }
        }

        function showSystemInfo() {
            orderSystem.showToast(`
                🖥️ 시스템 정보
                버전: 1.0.0
                모드: 오프라인 데스크톱
                데이터: 로컬 저장
                상태: 정상 작동
            `, 5000);
        }

        // 앱 로딩 완료 시 실행
        document.addEventListener('DOMContentLoaded', function() {
            // 상태 업데이트
            document.getElementById('status-text').textContent = '시스템 로딩 중...';
            
            setTimeout(() => {
                document.getElementById('status-text').textContent = 'White Platter 관리 준비 완료';
                updateLastSaved();
            }, 2000);
        });

        // 키보드 단축키 처리
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        orderSystem.switchTab('orders');
                        break;
                    case '2':
                        e.preventDefault();
                        orderSystem.switchTab('farm_customers');
                        break;
                    case '3':
                        e.preventDefault();
                        orderSystem.switchTab('products');
                        break;
                    case '4':
                        e.preventDefault();
                        orderSystem.switchTab('waitlist');
                        break;
                    case '5':
                        e.preventDefault();
                        orderSystem.switchTab('shipping');
                        break;
                    case 'b':
                        e.preventDefault();
                        quickBackup();
                        break;
                    case 'i':
                        e.preventDefault();
                        quickImport();
                        break;
                }
            }
        });
    </script>
</body>
</html>